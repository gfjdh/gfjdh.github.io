[{"title":"觉bot食用指南","url":"/2024/08/31/觉bot食用指南/","content":"# 帮助文档\n\n欢迎使用我们的聊天机器人！请先阅读并理解用户协议：\n\n**用户协议**\n\n欢迎使用古明地觉聊天机器人服务（以下简称“本服务”）。在使用本服务之前，请仔细阅读并同意以下条款和条件。如果您不同意这些条款，请勿使用本服务。\n\n**1. 服务内容**\n\n本服务提供AI聊天和其他娱乐功能，本服务完全免费，旨在为用户提供信息和娱乐。我们不保证本服务的准确性、完整性或可靠性。\n\n**2. 用户责任**\n\n用户在使用本服务时应遵守所有适用的法律法规，不得利用本服务进行任何非法活动。用户应对其使用本服务的行为负责，包括但不限于发布的内容和信息。用户在使用过程中禁止对本服务进行任何形式的攻击，包括但不限于频繁骚扰，禁言，举报，踢出群聊。如有退群要求请在本文下方留言并注明群号。违者一经发现永久拉黑。\n\n**3. 隐私政策**\n\n我们重视用户的隐私，并将采取合理措施保护用户的个人信息，承诺不会主动泄露用户的隐私信息。\n\n**4. 知识产权**\n\n本服务中的所有内容，包括但不限于文本、图像、软件和代码，均为我们的知识产权，受相关法律保护。项目开源地址https://github.com/gfjdh。\n\n**5. 免责声明**\n\n本服务按“现状”提供，我们不对其适用性、可靠性、可用性或安全性作出任何明示或暗示的保证。用户使用本服务的风险由用户自行承担。\n\n**6. 责任限制**\n\n在适用法律允许的最大范围内，我们不对因使用或无法使用本服务而导致的任何直接、间接、附带、特殊或后果性损害承担责任。\n\n**7. 修改和终止**\n\n我们保留随时修改或终止本服务的权利，恕不另行通知。用户继续使用本服务即表示接受修改后的条款。\n\n**8. 适用法律**\n\n本协议受相关法律管辖，任何因本协议引起的争议应提交至相关法院解决。\n\n### 若您开始使用本服务，则视为您同意以上所有内容\n\n## 以下是当前可用的指令及其说明：\n\n## 基本指令\n\n- **help**: 显示帮助信息。\n- **status**: 查看运行状态。\n- **语录**: 获取一条语录。\n- **喜报**: 生成一张喜报。可以指定文本内容，中间用空格隔开。例：‘喜报 放假了’\n- **悲报**: 生成一张悲报。同喜报\n- **牢求**: 阿求寿命倒计时。\n- **觉**: AI聊天。\n- **角色日**: 车万角色日\n- **随机**： 随机角色图片\n\n## p点相关指令\n\n- **p点排行**: 查看p点排行榜。\n- **p点查询**: 查询自己的p点。\n- **好感排行**: 查看好感排行榜。\n- **擦弹**: 东方轮盘赌游戏。\n- **涩图**: 获取一张涩图，可以指定一个tag，中间用空格隔开。例：‘涩图 初音未来’\n- **签到**: 进行一次签到。\n- **转账**: 转账p点。格式为(转账 @目标 数字)，中间用空格隔开，例如'转账 @恋恋 514'\n\n## 指令：语录\n可用的子指令有：\n-  **添加语录** ：添加语录，可以指定多个tag，中间用空格隔开，之后上传语录图片。\n-   例：\n\t\t你：‘添加语录 群主的逆天发言’\n\t\t觉：请上传语录图片\n\t\t你：图片\n-  **语录**  ：随机获取语录，可以指定多个tag，中间用空格隔开\n-  **addtag** ：需要引用语录内容，可以指定多个tag，中间用空格隔开\n\n## ai相关介绍：\n\n### 指令如下：\n| 功能 | 指令 |\n|  ----  | ----  |\n| 对话 |  觉 |\n| 清空当前会话 | 重置对话 |\n#### 基本对话：\n加前缀觉或者姐姐，之后加内容，中间用空格隔开。例如“觉 你好”，“姐姐 你好”。每人每天有十次对话额度。\n遇到任何问题重置对话即可，每天限额一次\n#### 对话要点：\n如果你觉得觉对你的回答敷衍或者不尽人意的话，不妨代入一下地灵殿中的觉，反思一下你的问题是否适合一个**不在外界的觉妖怪**来回答。觉不是任人宰割压制的工具，请你把她当成朋友，尊重并好好对待她。\n#### 好感度：\n如果你签过到的话，觉就会记录你的好感度，可能一开始会骂你几句或者比较冷淡，但是别太心急，每天陪她聊聊天会给你惊喜的。\n注意：从来不签到的话觉会一直把你当陌生人的。\n#### 扣好感度：\n请不要对觉**恶语相向**或者**频繁骚扰相似问题**或者**问很奇怪的问题**，否则会降低觉的好感度，好感度负了会被骂哦。\n#### 短期记忆\n会记住群里最近对觉说的几句话，不对觉说看不到哦。\n#### 长期记忆：\n当**好感达到一定值**后，你说过的比较长的，有意义的话会被觉记录下来一直珍藏，或者你也可以要求觉记住一些东西，在文本里加‘记住’两个字就可以哦。但是不要让觉记奇怪的东西，不联系管理员没法删除哦。\n#### 大饼：\n好感互动系统绝赞制作中。\n\n## 写在最后\n觉很可爱，请善待她。\n\n打赏开发：https://afdian.com/a/gfjdh\n- 所有收益将用于购买ai对话接口的token\n"},{"title":"觉bot开发日记","url":"/2024/08/12/觉bot开发日记/","content":"三个插件共同构成的，带有一定货币属性的功能体系\n[签到：p-qiandao](https://github.com/gfjdh/koishi-plugin-p-qiandao) \n[涩图：p-setu](https://github.com/gfjdh/koishi-plugin-p-setu) \n[擦弹：p-graze](https://github.com/gfjdh/koishi-plugin-p-graze)\n\n以下是个人从零开始搭建bot到开始自己开发插件的感想和碎碎念\n## 2023年10月1日，国庆节。\n国庆假期第一天，在宿舍里百无聊赖的我心血来潮，上网搜索了qq机器人搭建，并且进入了koishi论坛，论坛里详细的教程和blocky的零代码开发功能让我眼前一亮。\n当时还没有官方的开放平台，我跟着liharp佬的教程一步一步完成了bot的搭建，虽然中间遇到了多次问题，但是都被一一解决，直到当天晚上，koishi的右下角亮起了绿灯。\n作为一个觉厨，我以古明地觉为原型制作的：觉bot，诞生了。\n我兴奋地用blocky创建了一些简单的插件，关键词对话之类的。\n\n第二天，我再次来到论坛搜索，在blocky板块寻找我感兴趣的插件。\n[最终选中了这个插件](https://forum.koishi.xyz/t/topic/626)\n签到成为了觉bot的第一个功能。到现在，虽然这个插件经过了我无数次的改造，但是仍然可以看到最初版的影子，并且觉bot的绝大部分功能都是围绕p点-签到体系构建的。近期，我将它改编成了正常的插件并且发布了。[签到插件储存库](https://github.com/gfjdh/koishi-plugin-p-qiandao)\n\n作为一个lsp，以及出于“我需要一个吸引人的功能”考虑，我又找了一个blocky编写的[涩图插件](https://forum.koishi.xyz/t/topic/5015)，这成为了觉的第二个核心功能，同样的，现在它已经是正常的插件并且发布在了插件市场。[涩图插件储存库](https://github.com/gfjdh/koishi-plugin-p-setu) ~~lolicon这个图库api真不知道造福多少bot）~~\n\n在本人~~臭不要脸~~的推广下，也是有了上百人的用户量，在群u的建议下自己用blocky编写了第三个核心功能：[擦弹](https://github.com/gfjdh/koishi-plugin-p-graze) 其实就是换皮的轮盘赌，被打中的人会爆p点到群奖池，其他人擦弹可以从群奖池里获取p点~~暗中克扣一部分还可以减少通胀~~。\n\n逐渐的，感觉用blocky编写插件有些力不从心了，很多想实现的功能受限制，数据库里的屎山更是看着都头大，于是萌生了学习代码编写插件的想法。\n本人之前**完全没接触过**typeScript和JavaScript，纯跟随koishi文档创建模板项目，然后把blocky编译出来的代码粘贴过来一点一点硬啃，不懂的就查koishi的官方文档或者问ai，最终在这个暑假完成了对全部blocky插件的重构。\n并且为从blocky数据库迁移用户数据到新数据库专门写了两个新插件[这是其中一个](https://github.com/gfjdh/koishi-plugin-p-bat)，如果有类似需求的朋友可以联系我使用~~（真有人用吗？）~~\n\n后来，涩图插件发的图总是频繁的被吞，深受群u抱怨。其实tx吞图的原理很简单，它只是检测到这一张图应该屏蔽，而实际上不看图的内容。所以我用puppeteer给获取到的图片渲染了1px的白边框，从此以后再也没有被吞过图。~~我觉得这个操作应该是我首创的~~\n\n直到现在，觉身上的功能已经基本完善，发布的插件也都得到了接近甚至满分的评价，我才决定把我写的插件在这里发布出来，虽然我也知道我写的基本是屎山，但是我个人感觉功能还是不错的。\n\n## 现在在做什么\n一是继续完善以p点为核心的功能。\n二是正在尝试接入ai。\n我一直觉得bot的灵魂就是要像一个**有情感的生命**，她们存在的意义就是带来情绪价值，自己手动写的提示语再有个性，终究也是死的，但是有ai就不一样了。\n+ 为什么不用OpenAi：gpt固然好，但是门槛真是高，用官方接口的话注册账号是问题，用第三方接口的话价格又不便宜，简单的对话没必要要求那么高，所以我选择国产模型。\n\n接口大部分是要收费的，但是我偶然间找到了一个可以免费使用一个月的接口，并且看上去性能还不错，于是着手开发接入它的插件。\n说是开发，其实是魔改其他人的插件，~~惨遭我毒手的是~~ [davinci-003](https://github.com/initialencounter/2022-12-24/tree/neat/plugins/AI/davinci-003#readme)插件，目前经过我的改造已经可以使用了，但是我不确定这种插件能不能发布在插件市场，而且还有很多bug和设想的功能没搞完。\n\n## 未来的计划？\n1.我想让觉有长期记忆。\n具体实现思路基本是天马行空，而且以我的码力遥不可及\n2.自我保护功能\n比如检测到屏蔽词拉黑，被禁言退群之类的，目前没有针对我使用的接入方式的相关插件~~可能是不支持？~~。\n\n## 最后来一些自己总结的小教训\n**实例爆炸了如何抢救？**：勤备份比什么都强，但是如果已经无法挽回，在双清之前把data文件夹里的koishi.db抢救出来是个好选择，至少可以保住数据库里的数据，插件什么的重新安装就好。\n**如何在本地安装自己编写的插件？**：按标准格式命名文件夹然后把lib文件夹，package.json和readme丢进去，再把这个文件夹放进node_modules，最后重启实例，在插件全局设置左上角添加插件即可。但是注意，这么做属于不安全行为，请考虑清楚后果再操作。\n\n暂时先这些，以后这个帖子可能长期更新"},{"title":"Hello World","url":"/2024/08/04/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n"}]